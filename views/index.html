<!DOCTYPE html>
<html style="background-color:#000000; color:#FFFFFF;">
	<head>
        <meta charset="UTF-8" />
        <link rel="icon" href="https://i.imgur.com/I8ju6wN.png">
        <title>Tales of Raziel Lewach</title>
        <script src="https://code.jquery.com/jquery-latest.min.js"></script>
		
		<style>
			/* Style the tab */
			.tab {
			  overflow: hidden;
			  border: 1px solid #ccc;
			  background-color: #f1f1f1;
			}

			/* Style the buttons inside the tab */
			.tab button {
			  background-color: inherit;
			  float: left;
			  border: none;
			  outline: none;
			  cursor: pointer;
			  padding: 14px 16px;
			  transition: 0.3s;
			  font-size: 17px;
			}

			/* Change background color of buttons on hover */
			.tab button:hover {
			  background-color: #ddd;
			}

			/* Create an active/current tablink class */
			.tab button.active {
			  background-color: #ccc;
			}

			/* Style the tab content */
			.tabcontent {
			  display: none;
			  padding: 6px 12px;
			  border: 1px solid #ccc;
			  border-top: none;
			}
		</style>
	</head>

	<body>
		<table><tr><td>TALES OF RAZIEL LEWACH</td></tr>
		<tr><td><label for="name">Name:</label><input id="name" type="text"></input></td>
		<td><label for="pass">Password:</label><input id="pass" type="text"></input></td>
		<td><p id="msgSesion">Account not started. Create a new user or enter your existing user!</p></td></tr></table>
		
		<div class="tab">
			<button class="tablinks" onclick="openTale(event, 'aSpaceTrip')">A Space Trip</button>
		</div>

		<div id="aSpaceTrip" class="tabcontent" style="display: none;">
			<h3>A Space Trip</h3>
			
		</div>
		
		<script src="/socket.io/socket.io.js"></script>
		<script>
			var socket = io();
			var user = ""; // Nombre de usuario para chequear en el momento. Sólo se setea tras logins exitosos, pero aun así comprobar en cada acceso por si lo modifican con hacks.
			
			// Señales de lógica enviadas.
			$("#name").keypress((e) => {
				if (e.key == "Enter") login();
			});
			$("#pass").keypress((e) => {
				if (e.key == "Enter") login();
			});
			
			function login()
			{
				socket.emit("login",$("#name").val(),$("#pass").val());
			}
			
			// Señales de lógica recibidas.
			socket.on("newUserSuccess", (name) => {
				$("#msgSesion").text("Welcome to your account, "+String(name)+"!");
				user = name;
				$("#aSpaceTrip").css("display","inline");
			});
			socket.on("newUserFail", (name) => {
				$("#msgSesion").text("Wrong password for that account!");
				user = "";
			});
			
			function openTale(evt, taleName) {
				var i, tabcontent, tablinks;
				tabcontent = document.getElementsByClassName("tabcontent");
				for (i = 0; i < tabcontent.length; i++) {
					tabcontent[i].style.display = "none";
				}
				tablinks = document.getElementsByClassName("tablinks");
				for (i = 0; i < tablinks.length; i++) {
					tablinks[i].className = tablinks[i].className.replace(" active", "");
				}
				document.getElementById(taleName).style.display = "block";
				evt.currentTarget.className += " active";
			}
		</script>
		
	</body>
</html>
